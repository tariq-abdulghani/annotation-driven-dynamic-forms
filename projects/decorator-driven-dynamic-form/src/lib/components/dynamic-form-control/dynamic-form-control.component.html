<ng-container *ngFor="let inputDescription of formDescription.childInputs">
  <div
    *ngIf="
      inputDescription.inputType == CONTROL_TYPES.TEXT ||
      inputDescription.inputType == CONTROL_TYPES.NUMBER ||
      inputDescription.inputType == CONTROL_TYPES.DATE
    "
    lib-input
    [inputDescription]="inputDescription"
    [labelStyling]="formDescription.meta.labelStyling"
    [class]="'col-md-' + inputDescription.meta.width"
  ></div>

  <div
    *ngIf="inputDescription.inputType == CONTROL_TYPES.SELECT"
    lib-select-input
    [inputDescription]="inputDescription"
    [labelStyling]="formDescription.meta.labelStyling"
    [class]="'col-md-' + inputDescription.meta.width"
  ></div>

  <!-- <div
    *ngIf="inputDescription.inputType == CONTROL_TYPES.CHECKBOX"
    lib-checkbox-input
    [inputDescription]="inputDescription"
    [labelStyling]="formDescription.meta.labelStyling"
    [class]="'col-md-' + inputDescription.meta.width"
  ></div> -->

  <!-- <div
    *ngIf="
      inputDescription.inputType == CONTROL_TYPES.TEXT ||
      inputDescription.inputType == CONTROL_TYPES.NUMBER ||
      inputDescription.inputType == CONTROL_TYPES.DATE
    "
    [class]="
      formDescription.meta?.isGrid()
        ? 'col-md-' + inputDescription.meta.width
        : 'row mb-3'
    "
  >
    <label
      [attr.for]="inputDescription.meta.id"
      [class]="formDescription.meta?.isGrid() ? 'form-label' : 'col-md-2'"
      [ngClass]="{
        'required-control-label': inputDescription.meta.required,
        'invalid-label':
          inputDescription.control?.touched && inputDescription.control?.invalid
      }"
      >{{ inputDescription.meta.label || inputDescription.meta }}</label
    >
    <div [class]="formDescription.meta?.isGrid() ? 'col-12' : 'col-md-10'">
      <input
        class="form-control"
        [ngClass]="{
          'is-invalid':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        [placeholder]="inputDescription.meta.placeHolder || ''"
        [id]="inputDescription.meta.id"
        [type]="inputDescription.meta.type"
        [formControl]="$any(inputDescription.control)"
        [name]="inputDescription.meta.name"
        [attr.readonly]="inputDescription.meta.readonly"
      />

      <div
        class="invalid-feedback"
        *ngIf="
          inputDescription.control?.touched && inputDescription.control?.invalid
        "
      >
        {{ inputDescription | errorMessage }}
      </div>
    </div>
  </div> -->

  <!-- <div
    *ngIf="inputDescription.inputType == CONTROL_TYPES.SELECT"
    [class]="
      formDescription.meta?.isGrid()
        ? 'col-md-' + inputDescription.meta.width
        : 'row mb-3'
    "
  >
    <label
      [attr.for]="inputDescription.meta.id"
      [class]="formDescription.meta?.isGrid() ? 'form-label' : 'col-md-2'"
      [ngClass]="{
        'required-control-label': inputDescription.meta.required,
        'invalid-label':
          inputDescription.control?.touched && inputDescription.control?.invalid
      }"
      >{{ inputDescription.meta.label || inputDescription.meta.name }}</label
    >
    <div [class]="formDescription.meta?.isGrid() ? 'col-12' : 'col-md-10'">
      <select
        class="form-select"
        [ngClass]="{
          'is-invalid':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        [id]="inputDescription.meta.id"
        [formControl]="$any(inputDescription.control)"
        [name]="inputDescription.meta.name"
        [compareWith]="inputDescription.meta.compareWith"
      >
        <option
          *ngFor="let opt of loadData(inputDescription.meta.dataSource) | async"
          [ngValue]="
            opt[inputDescription.meta.bindValue]
              ? opt[inputDescription.meta.bindValue]
              : opt
          "
        >
          {{ opt[inputDescription.meta.bindLabel] }}
        </option>
      </select>

      <div
        class="invalid-feedback"
        *ngIf="
          inputDescription.control?.touched && inputDescription.control?.invalid
        "
      >
        {{ inputDescription | errorMessage }}
      </div>
    </div>
  </div>

  <div
    *ngIf="inputDescription.inputType == CONTROL_TYPES.CHECKBOX"
    [class]="
      formDescription.meta?.isGrid()
        ? 'col-sm-' + inputDescription.meta.width
        : 'col-sm-10 offset-sm-2'
    "
  >
    <div class="form-check">
      <input
        class="form-check-input"
        [ngClass]="{
          'is-invalid':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        [id]="inputDescription.meta.id"
        type="checkbox"
        [formControl]="$any(inputDescription.control)"
        [name]="inputDescription.meta.name"
      />
      <label
        [attr.for]="inputDescription.meta.id"
        [class]="formDescription.meta?.isGrid() ? 'form-label' : 'col-md-2'"
        [ngClass]="{
          'required-control-label': inputDescription.meta.required,
          'invalid-label':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        >{{ inputDescription.meta.label || inputDescription.meta.name }}</label
      >
      <div
        class="invalid-feedback"
        *ngIf="
          inputDescription.control?.touched && inputDescription.control?.invalid
        "
      >
        {{ inputDescription | errorMessage }}
      </div>
    </div>
  </div>

  <fieldset
    class="row mt-3 mb-3"
    *ngIf="inputDescription.inputType == CONTROL_TYPES.RADIO_BUTTONS"
  >
    <legend
      [class]="
        formDescription.meta?.isGrid()
          ? 'col-12'
          : 'col-form-label col-sm-2 pt-0'
      "
    >
      {{ inputDescription.meta.legend }}
    </legend>
    <div [class]="formDescription.meta?.isGrid() ? 'row' : 'col-sm-10'">
      <div
        [class]="
          formDescription.meta?.isGrid()
            ? 'col-sm-' + inputDescription.meta.width
            : ''
        "
        *ngFor="
          let opt of loadData(inputDescription.meta.dataSource) | async;
          let i = index
        "
      >
        <input
          class="form-check-input mr-50"
          [id]="inputDescription.meta.id + i"
          type="radio"
          [formControl]="$any(inputDescription.control)"
          [value]="
            inputDescription.meta.bindValue
              ? opt[inputDescription.meta.bindValue]
              : opt
          "
          [name]="inputDescription.meta.name"
        />
        <label
          class="form-check-label"
          [attr.for]="inputDescription.meta.id + i"
        >
          {{ opt[inputDescription.meta.bindLabel] }}
        </label>
      </div>
    </div>
  </fieldset>

  <fieldset
    class="row mt-3 mb-3"
    dd-dynamic-from-control
    [formDescription]="$any(inputDescription)"
    *ngIf="inputDescription.inputType == CONTROL_TYPES.COMPOSITE"
  ></fieldset>

  <div
    class="invalid-feedback"
    *ngIf="
      inputDescription.control?.touched && inputDescription.control?.invalid
    "
  >
    {{ inputDescription | errorMessage }}
  </div> -->
</ng-container>

<!-- <legend
  *ngIf="$any(formDescription.meta).legend"
  [class]="
    formDescription.meta?.isGrid() ? 'col-12' : 'col-form-label col-sm-2 pt-0'
  "
>
  {{ $any(formDescription).meta?.legend }}
</legend> -->

<!-- 
<ng-container *ngFor="let inputDescription of formDescription.childInputs">
  <div
    *ngIf="
      inputDescription.inputType == CONTROL_TYPES.TEXT ||
      inputDescription.inputType == CONTROL_TYPES.NUMBER ||
      inputDescription.inputType == CONTROL_TYPES.DATE
    "
    [class]="
      formDescription.meta?.isGrid()
        ? 'col-md-' + inputDescription.meta.width
        : 'row mb-3'
    "
  >
    <label
      [attr.for]="inputDescription.meta.id"
      [class]="formDescription.meta?.isGrid() ? 'form-label' : 'col-md-2'"
      [ngClass]="{
        'required-control-label': inputDescription.meta.required,
        'invalid-label':
          inputDescription.control?.touched && inputDescription.control?.invalid
      }"
      >{{ inputDescription.meta.label || inputDescription.meta }}</label
    >
    <div [class]="formDescription.meta?.isGrid() ? 'col-12' : 'col-md-10'">
      <input
        class="form-control"
        [ngClass]="{
          'is-invalid':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        [placeholder]="inputDescription.meta.placeHolder || ''"
        [id]="inputDescription.meta.id"
        [type]="inputDescription.meta.type"
        [formControl]="$any(inputDescription.control)"
        [name]="inputDescription.meta.name"
        [attr.readonly]="inputDescription.meta.readonly"
      />

      <div
        class="invalid-feedback"
        *ngIf="
          inputDescription.control?.touched && inputDescription.control?.invalid
        "
      >
        {{ inputDescription | errorMessage }}
      </div>
    </div>
  </div>

  <div
    *ngIf="inputDescription.inputType == CONTROL_TYPES.SELECT"
    [class]="
      formDescription.meta?.isGrid()
        ? 'col-md-' + inputDescription.meta.width
        : 'row mb-3'
    "
  >
    <label
      [attr.for]="inputDescription.meta.id"
      [class]="formDescription.meta?.isGrid() ? 'form-label' : 'col-md-2'"
      [ngClass]="{
        'required-control-label': inputDescription.meta.required,
        'invalid-label':
          inputDescription.control?.touched && inputDescription.control?.invalid
      }"
      >{{ inputDescription.meta.label || inputDescription.meta.name }}</label
    >
    <div [class]="formDescription.meta?.isGrid() ? 'col-12' : 'col-md-10'">
      <select
        class="form-select"
        [ngClass]="{
          'is-invalid':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        [id]="inputDescription.meta.id"
        [formControl]="$any(inputDescription.control)"
        [name]="inputDescription.meta.name"
        [compareWith]="inputDescription.meta.compareWith"
      >
        <option
          *ngFor="let opt of loadData(inputDescription.meta.dataSource) | async"
          [ngValue]="
            opt[inputDescription.meta.bindValue]
              ? opt[inputDescription.meta.bindValue]
              : opt
          "
        >
          {{ opt[inputDescription.meta.bindLabel] }}
        </option>
      </select>

      <div
        class="invalid-feedback"
        *ngIf="
          inputDescription.control?.touched && inputDescription.control?.invalid
        "
      >
        {{ inputDescription | errorMessage }}
      </div>
    </div>
  </div>

  <div
    *ngIf="inputDescription.inputType == CONTROL_TYPES.CHECKBOX"
    [class]="
      formDescription.meta?.isGrid()
        ? 'col-sm-' + inputDescription.meta.width
        : 'col-sm-10 offset-sm-2'
    "
  >
    <div class="form-check">
      <input
        class="form-check-input"
        [ngClass]="{
          'is-invalid':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        [id]="inputDescription.meta.id"
        type="checkbox"
        [formControl]="$any(inputDescription.control)"
        [name]="inputDescription.meta.name"
      />
      <label
        [attr.for]="inputDescription.meta.id"
        [class]="formDescription.meta?.isGrid() ? 'form-label' : 'col-md-2'"
        [ngClass]="{
          'required-control-label': inputDescription.meta.required,
          'invalid-label':
            inputDescription.control?.touched &&
            inputDescription.control?.invalid
        }"
        >{{ inputDescription.meta.label || inputDescription.meta.name }}</label
      >
      <div
        class="invalid-feedback"
        *ngIf="
          inputDescription.control?.touched && inputDescription.control?.invalid
        "
      >
        {{ inputDescription | errorMessage }}
      </div>
    </div>
  </div>

  <fieldset
    class="row mt-3 mb-3"
    *ngIf="inputDescription.inputType == CONTROL_TYPES.RADIO_BUTTONS"
  >
    <legend
      [class]="
        formDescription.meta?.isGrid()
          ? 'col-12'
          : 'col-form-label col-sm-2 pt-0'
      "
    >
      {{ inputDescription.meta.legend }}
    </legend>
    <div [class]="formDescription.meta?.isGrid() ? 'row' : 'col-sm-10'">
      <div
        [class]="
          formDescription.meta?.isGrid()
            ? 'col-sm-' + inputDescription.meta.width
            : ''
        "
        *ngFor="
          let opt of loadData(inputDescription.meta.dataSource) | async;
          let i = index
        "
      >
        <input
          class="form-check-input mr-50"
          [id]="inputDescription.meta.id + i"
          type="radio"
          [formControl]="$any(inputDescription.control)"
          [value]="
            inputDescription.meta.bindValue
              ? opt[inputDescription.meta.bindValue]
              : opt
          "
          [name]="inputDescription.meta.name"
        />
        <label
          class="form-check-label"
          [attr.for]="inputDescription.meta.id + i"
        >
          {{ opt[inputDescription.meta.bindLabel] }}
        </label>
      </div>
    </div>
  </fieldset>

  <fieldset
    class="row mt-3 mb-3"
    dd-dynamic-from-control
    [formDescription]="$any(inputDescription)"
    *ngIf="inputDescription.inputType == CONTROL_TYPES.COMPOSITE"
  ></fieldset>

  <div
    class="invalid-feedback"
    *ngIf="
      inputDescription.control?.touched && inputDescription.control?.invalid
    "
  >
    {{ inputDescription | errorMessage }}
  </div>
</ng-container> -->

<!-- old code -->
<!-- 
<div
  class="row g-3 mb-3"
  [formGroup]="formDescriptor.formGroup"
  *ngIf="formDescriptor?.formLayout == FORM_LAYOUT_OPTS.GRID && false"
>
  <ng-container *ngFor="let controlMeta of formDescriptor.controlsDescriptor">
    <div
      [ngSwitch]="controlMeta.controlType"
      [class]="'col-sm-' + controlMeta.width"
    >
      <input
        *ngSwitchCase="CONTROL_TYPES.Checkbox"
        class="form-check-input"
        [ngClass]="{
          'is-invalid':
            controlMeta.formControl?.touched && controlMeta.formControl.invalid
        }"
        [id]="controlMeta.id"
        type="checkbox"
        [formControl]="controlMeta.formControl"
        [name]="controlMeta.name"
      />
      <label
        [attr.for]="controlMeta.id"
        [ngClass]="{
          'form-check-label ml-2':
            controlMeta.controlType == CONTROL_TYPES.Checkbox,
          'form-label': controlMeta.controlType != CONTROL_TYPES.Checkbox,
          'required-control-label': controlMeta.required,
          'invalid-label':
            controlMeta.formControl?.touched && controlMeta.formControl.invalid
        }"
        *ngIf="controlMeta.controlType != CONTROL_TYPES.Composite"
        >{{ controlMeta.label || controlMeta.name }}</label
      >
      <input
        *ngSwitchCase="CONTROL_TYPES.Text"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            controlMeta.formControl?.touched && controlMeta.formControl.invalid
        }"
        [id]="controlMeta.id"
        [type]="controlMeta.type"
        [formControl]="controlMeta.formControl"
        [name]="controlMeta.name"
      />

      <input
        *ngSwitchCase="CONTROL_TYPES.Number"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            controlMeta.formControl?.touched && controlMeta.formControl.invalid
        }"
        [id]="controlMeta.id"
        [type]="controlMeta.type"
        [formControl]="controlMeta.formControl"
        [name]="controlMeta.name"
      />

      <input
        *ngSwitchCase="CONTROL_TYPES.Date"
        class="form-control"
        [ngClass]="{
          'is-invalid':
            controlMeta.formControl?.touched && controlMeta.formControl.invalid
        }"
        [id]="controlMeta.id"
        [type]="controlMeta.type"
        [formControl]="controlMeta.formControl"
        [name]="controlMeta.name"
        [min]="controlMeta.minDate"
        [max]="controlMeta.maxDate"
      />

      <select
        *ngSwitchCase="CONTROL_TYPES.Select"
        class="form-select"
        [ngClass]="{
          'is-invalid':
            controlMeta.formControl?.touched && controlMeta.formControl.invalid
        }"
        [id]="controlMeta.id"
        [formControl]="controlMeta.formControl"
        [name]="controlMeta.name"
        [compareWith]="$any(controlMeta).compareWith"
      >
        <option
          *ngFor="let opt of loadData($any(controlMeta).dataSource) | async"
          [ngValue]="
            opt[$any(controlMeta).bindValue]
              ? opt[$any(controlMeta).bindValue]
              : opt
          "
        >
          {{ opt[$any(controlMeta).bindLabel] }}
        </option>
      </select>

      <fieldset *ngSwitchCase="CONTROL_TYPES.Composite">
        <legend class="nested-form-legend">
          {{ controlMeta.label || controlMeta.name }}
        </legend>

      <fieldset *ngSwitchCase="CONTROL_TYPES.RadioButtons">
        <legend class="nested-form-legend">
          {{ controlMeta.legend }}
        </legend>
        <ng-container
          *ngFor="
            let opt of loadData($any(controlMeta).dataSource) | async;
            let i = index
          "
        >
          <input
            [id]="controlMeta.id + i"
            type="radio"
            [formControl]="controlMeta.formControl"
            [value]="opt"
          />
          <label class="form-check-label" [attr.for]="controlMeta.id + i">
            {{ opt[$any(controlMeta).bindLabel] }}
          </label>
        </ng-container>
      </fieldset>

      <div
        class="invalid-feedback"
        *ngIf="
          controlMeta.formControl?.touched && controlMeta.formControl?.invalid
        "
      >
        {{ controlMeta | errorMessage }}
      </div>
    </div>
  </ng-container>
</div> -->
